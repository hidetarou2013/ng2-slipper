!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Rx")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Rx"],t):t(e.slipper=e.slipper||{},e.ng.core,e._angular_common,e.rxjs_Rx)}(this,function(e,t,r,n){"use strict";var o=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},i=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.el=e,this.itemDragged=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e&&e.slipperItems&&this.slipperItems&&(this.sub||(this.sub=this.slipperItems.subscribe(function(e){setTimeout(function(){this.init()}.bind(t))})))},e.prototype.init=function(){for(var e,t=this.el.nativeElement,r=t.querySelectorAll("[slipperitem]"),n=this,o=0,i=r;o<i.length;o++){var a=i[o];a.hasAttribute("eventHandlerAttached")||(a.addEventListener("dragstart",function(t){if(t.stopPropagation(),e=this,e.style.border="3px solid",t.dataTransfer.effectAllowed="move",n.moveImagePath){var r=new Image;r.src=n.moveImagePath,t.dataTransfer.setDragImage(r,25,0)}n.dragStartPosition=n.getNodeIndex(this.parentNode,this)}),a.addEventListener("dragenter",function(t){e!==this&&(n.isbefore(e,this)?this.parentNode.insertBefore(e,this):this.parentNode.insertBefore(e,this.nextSibling))}),a.addEventListener("dragend",function(t){e.style.border="none";var r=n.getNodeIndex(this.parentNode,this);n.itemDragged.emit({previousIndex:n.dragStartPosition,finalIndex:r})}),a.setAttribute("draggable","true"),a.style.cursor="move",a.setAttribute("eventHandlerAttached","true"))}},e.prototype.getNodeIndex=function(e,t){var r=e.querySelectorAll("[slipperitem]");return Array.prototype.indexOf.call(r,t)},e.prototype.isbefore=function(e,t){if(e.parentNode===t.parentNode)for(var r=e;r;r=r.previousSibling)if(r===t)return!0;return!1},e}();o([t.Input(),i("design:type",n.Observable)],a.prototype,"slipperItems",void 0),o([t.Input(),i("design:type",String)],a.prototype,"moveImagePath",void 0),o([t.Output(),i("design:type",t.EventEmitter)],a.prototype,"itemDragged",void 0),a=o([t.Directive({selector:"[slipper]"}),i("design:paramtypes",[t.ElementRef])],a);var s=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};e.SlipperModule=p=function(){function e(){}return e.forRoot=function(){return{ngModule:p,providers:[]}},e}(),e.SlipperModule=p=s([t.NgModule({imports:[r.CommonModule],declarations:[a],exports:[a]})],e.SlipperModule);var p;Object.defineProperty(e,"__esModule",{value:!0})});